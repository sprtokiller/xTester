import{g as U,v as S,x as z,e as N,l as ee,u as G,V as te,q as x,s as ne,h as l,F as P,W as ae,o as d,c as E,b as y,X as re,Y as H,k as D,R as _,w as i,a as u,U as ie,Z as q,S as r,N as V,$ as B,d as w,a0 as I,a1 as b,a2 as se,a3 as le}from"./index-e7fb9abe.js";import{u as oe,D as ce,N as ue,a as de,b as he}from"./DeleteFilled-5d540d40.js";import{N as M}from"./Icon-6e576580.js";import{N as fe}from"./Input-00751233.js";import{N as ve}from"./Popover-045cd7c7.js";import{N as me}from"./Space-67f76dc2.js";import{N as T,a as ge}from"./Suffix-92a8883e.js";import{N as K}from"./Spin-ff46ac0b.js";import{u as W}from"./use-message-450c0545.js";import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";import{N as _e}from"./headers-de3dd4d5.js";import"./use-compitable-bbfa6a86.js";import"./get-slot-1efb97e5.js";const xe=U("thing",`
 display: flex;
 transition: color .3s var(--n-bezier);
 font-size: var(--n-font-size);
 color: var(--n-text-color);
`,[U("thing-avatar",`
 margin-right: 12px;
 margin-top: 2px;
 `),U("thing-avatar-header-wrapper",`
 display: flex;
 flex-wrap: nowrap;
 `,[U("thing-header-wrapper",`
 flex: 1;
 `)]),U("thing-main",`
 flex-grow: 1;
 `,[U("thing-header",`
 display: flex;
 margin-bottom: 4px;
 justify-content: space-between;
 align-items: center;
 `,[S("title",`
 font-size: 16px;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 color: var(--n-title-text-color);
 `)]),S("description",[z("&:not(:last-child)",`
 margin-bottom: 4px;
 `)]),S("content",[z("&:not(:first-child)",`
 margin-top: 12px;
 `)]),S("footer",[z("&:not(:first-child)",`
 margin-top: 12px;
 `)]),S("action",[z("&:not(:first-child)",`
 margin-top: 12px;
 `)])])]),ye=Object.assign(Object.assign({},G.props),{title:String,titleExtra:String,description:String,descriptionStyle:[String,Object],content:String,contentStyle:[String,Object],contentIndented:Boolean}),we=N({name:"Thing",props:ye,setup(t,{slots:e}){const{mergedClsPrefixRef:a,inlineThemeDisabled:g,mergedRtlRef:v}=ee(t),C=G("Thing","-thing",xe,ae,t,a),k=te("Thing",v,a),p=x(()=>{const{self:{titleTextColor:o,textColor:n,titleFontWeight:f,fontSize:m},common:{cubicBezierEaseInOut:O}}=C.value;return{"--n-bezier":O,"--n-font-size":m,"--n-text-color":n,"--n-title-font-weight":f,"--n-title-text-color":o}}),h=g?ne("thing",void 0,p,t):void 0;return()=>{var o;const{value:n}=a,f=k?k.value:!1;return(o=h?.onRender)===null||o===void 0||o.call(h),l("div",{class:[`${n}-thing`,h?.themeClass,f&&`${n}-thing--rtl`],style:g?void 0:p.value},e.avatar&&t.contentIndented?l("div",{class:`${n}-thing-avatar`},e.avatar()):null,l("div",{class:`${n}-thing-main`},!t.contentIndented&&(e.header||t.title||e["header-extra"]||t.titleExtra||e.avatar)?l("div",{class:`${n}-thing-avatar-header-wrapper`},e.avatar?l("div",{class:`${n}-thing-avatar`},e.avatar()):null,e.header||t.title||e["header-extra"]||t.titleExtra?l("div",{class:`${n}-thing-header-wrapper`},l("div",{class:`${n}-thing-header`},e.header||t.title?l("div",{class:`${n}-thing-header__title`},e.header?e.header():t.title):null,e["header-extra"]||t.titleExtra?l("div",{class:`${n}-thing-header__extra`},e["header-extra"]?e["header-extra"]():t.titleExtra):null),e.description||t.description?l("div",{class:`${n}-thing-main__description`,style:t.descriptionStyle},e.description?e.description():t.description):null):null):l(P,null,e.header||t.title||e["header-extra"]||t.titleExtra?l("div",{class:`${n}-thing-header`},e.header||t.title?l("div",{class:`${n}-thing-header__title`},e.header?e.header():t.title):null,e["header-extra"]||t.titleExtra?l("div",{class:`${n}-thing-header__extra`},e["header-extra"]?e["header-extra"]():t.titleExtra):null):null,e.description||t.description?l("div",{class:`${n}-thing-main__description`,style:t.descriptionStyle},e.description?e.description():t.description):null),e.default||t.content?l("div",{class:`${n}-thing-main__content`,style:t.contentStyle},e.default?e.default():t.content):null,e.footer?l("div",{class:`${n}-thing-main__footer`},e.footer()):null,e.action?l("div",{class:`${n}-thing-main__action`},e.action()):null))}}}),Ce={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ke=y("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83l3.75 3.75l1.83-1.83z",fill:"currentColor"},null,-1),Ue=[ke],Ie=N({name:"EditFilled",render:function(e,a){return d(),E("svg",Ce,Ue)}}),De={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Se=y("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8z",fill:"currentColor"},null,-1),be=[Se],Ee=N({name:"InfoOutlined",render:function(e,a){return d(),E("svg",De,be)}}),Ne={mounted(t,e){t.clickOutsideEvent=function(a){t==a.target||t.contains(a.target)||(a.stopPropagation(),e.value())},document.body.addEventListener("click",t.clickOutsideEvent)},unmounted(t){document.body.removeEventListener("click",t.clickOutsideEvent)}},$e={mounted(t){const e=t.querySelector("input");e.focus(),e.click()}},ze={key:1},Te={class:"large-text"},Oe={style:{"white-space":"nowrap"}},Re=N({__name:"CourseItem",props:{editUUID:{type:String,required:!1},course:{type:Object,required:!0}},emits:["editSelect","deleteCourse","renameCourse"],setup(t,{emit:e}){const a=t,g=$e,v=Ne,C=re(),k=oe(),p=W(),h=H(),o=D(a.course.name),n=D(!1),f=D(!1);function m(){C.push({name:"courseDetail",params:{courseUUID:a.course.courseUUID}})}function O(){e("editSelect",a.course.courseUUID)}function Y(){j.value&&F()}function X(){var c="Are you sure you want to delete this course?";const s=a.course.tests.length;s&&(c+=` This will also delete ${s} test${s==1?"":"s"}.`),k.warning({title:"Confirm",content:c,positiveText:"Delete",negativeText:"Cancel",onPositiveClick:async()=>{try{f.value=!0,await h.deleteCourse(a.course.courseUUID),p.success("Course deleted successfully"),e("deleteCourse",a.course.courseUUID)}catch($){p.error($ instanceof Error?$.message:"Unknown error")}finally{f.value=!1}}})}function Z(c){c.key==="Enter"?F():c.key==="Escape"&&(o.value=a.course.name,e("editSelect",""))}async function F(){if(o.value=o.value.trim(),o.value===a.course.name){e("editSelect","");return}try{n.value=!0,await h.renameCourse(a.course.courseUUID,o.value),e("renameCourse",a.course.courseUUID,o.value),p.success("Course name changed successfully")}catch(c){p.error(c instanceof Error?c.message:"Unknown error")}finally{n.value=!1,e("editSelect","")}}const j=x(()=>a.editUUID===a.course.courseUUID),R=x(()=>{const c=new Date;return a.course.tests.filter(s=>s.startAt&&new Date(s.startAt)>c).length}),A=x(()=>{const c=new Date;return a.course.tests.filter(s=>s.startAt&&new Date(s.startAt)<=c&&(!s.endAt||new Date(s.endAt)>c)).length}),L=x(()=>{const c=new Date;return a.course.tests.filter(s=>s.endAt&&new Date(s.endAt)<=c).length}),J=x(()=>({"background-image":`url('${Q.value}')`})),Q=x(()=>{switch(a.course.contentType){case"RISE":return"/rise.svg";case"STORYLINE":return"/storyline.svg";case"STUDIO":return"/studio.svg";case"OTHER":default:return"/unknown.svg"}});return(c,s)=>(d(),_(r(K),{show:f.value},{default:i(()=>[u(r(ue),{onClick:m},{prefix:i(()=>[y("div",{class:"course-avatar",style:ie(J.value)},null,4)]),suffix:i(()=>[y("div",Oe,[q((d(),_(r(V),{onClick:B(O,["stop"]),class:"btn-course-action",size:"small",quaternary:"",circle:"",type:"success"},{icon:i(()=>[u(r(M),{class:"icon-no-align"},{default:i(()=>[u(r(Ie))]),_:1})]),_:1},8,["onClick"])),[[r(v),Y]]),u(r(V),{onClick:B(X,["stop"]),class:"btn-course-action",size:"small",quaternary:"",circle:"",type:"error"},{icon:i(()=>[u(r(M),{class:"icon-no-align"},{default:i(()=>[u(r(ce))]),_:1})]),_:1},8,["onClick"])])]),default:i(()=>[u(r(we),null,{header:i(()=>[j.value?q((d(),_(r(fe),{key:0,ref:"courseNameInputRef",class:"course-name-input",placeholder:"Course name",value:o.value,"onUpdate:value":s[0]||(s[0]=$=>o.value=$),onClick:s[1]||(s[1]=B(()=>{},["stop"])),autosize:"","passively-activated":!0,loading:n.value,disabled:n.value,onKeyup:Z},null,8,["value","loading","disabled"])),[[r(g)]]):(d(),E("div",ze,[w(I(t.course.name)+" ",1),u(r(ve),{placement:"right-start",trigger:"hover"},{trigger:i(()=>[u(r(M),{size:"tiny",depth:"3",style:{"margin-left":"0.3rem"}},{default:i(()=>[u(r(Ee))]),_:1})]),default:i(()=>[y("div",Te,[y("div",null,"Author: "+I(t.course.author),1),y("div",null,"Version "+I(t.course.version),1)])]),_:1})]))]),description:i(()=>[u(r(me),{size:"small",style:{"margin-top":"4px"}},{default:i(()=>[A.value||L.value||R.value?b("",!0):(d(),_(r(T),{key:0,class:"tag-chip",bordered:!1,type:"default",size:"small"},{default:i(()=>[w(" No tests ")]),_:1})),R.value?(d(),_(r(T),{key:1,class:"tag-chip",bordered:!1,type:"warning",size:"small"},{default:i(()=>[w(" Planned: "+I(R.value),1)]),_:1})):b("",!0),A.value?(d(),_(r(T),{key:2,class:"tag-chip",bordered:!1,type:"info",size:"small"},{default:i(()=>[w(" Active: "+I(A.value),1)]),_:1})):b("",!0),L.value?(d(),_(r(T),{key:3,class:"tag-chip",bordered:!1,type:"success",size:"small"},{default:i(()=>[w(" Completed: "+I(L.value),1)]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]))}});const Ae=pe(Re,[["__scopeId","data-v-da141543"]]),Xe=N({__name:"CoursesView",setup(t){const e=W(),a=H(),g=D(!0),v=D([]),C=D("");se(async()=>{try{g.value=!0,v.value=await a.getCourseList()}catch(n){e.error(n instanceof Error?n.message:"Unknown error")}finally{g.value=!1}});const k=x(()=>v.value.length===0);function p(n){C.value=n}function h(n){v.value=v.value.filter(f=>f.courseUUID!==n)}function o(n,f){v.value=v.value.map(m=>(m.courseUUID===n&&(m.name=f),m))}return(n,f)=>(d(),E(P,null,[u(r(_e),null,{default:i(()=>[w("List of courses")]),_:1}),u(r(he),null,{default:i(()=>[u(r(K),{show:g.value,style:{"min-height":"200px"}},{default:i(()=>[u(r(de),{hoverable:"",clickable:""},{default:i(()=>[(d(!0),E(P,null,le(v.value,m=>(d(),_(Ae,{course:m,editUUID:C.value,key:m.courseUUID,onEditSelect:p,onDeleteCourse:h,onRenameCourse:o},null,8,["course","editUUID"]))),128))]),_:1}),!g.value&&k.value?(d(),_(r(ge),{key:0,description:"No e-learning courses found :("},{extra:i(()=>[u(r(V),{size:"small"},{default:i(()=>[w(" Start by adding a course! ")]),_:1})]),_:1})):b("",!0)]),_:1},8,["show"])]),_:1})],64))}});export{Xe as default};
