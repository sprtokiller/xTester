import{p as xe,N as Se,f as ce,V as Me,h as je,j as De,a as ze,r as Be,u as $e}from"./Icon-5b18e85f.js";import{s as G,ap as fe,aL as He,aM as Ge,aN as We,am as Ue,aG as Q,aO as Ve,ay as X,f as $,h,g as ke,j as Pe,W as qe,k as Ze,G as oe,m as I,l as pe,i as q,aP as Ne,p as J,u as Y,ab as Je,ah as Ce,n as ee,aI as Qe,F as Xe,aQ as Ye,aR as en,aS as nn,z as M,ao as on,y as Z,C as ge,A as z,B as H,I as B,E as tn,J as ie,T as V,K as rn,v as dn}from"./index-96555aa1.js";function ye(e,n){let{target:o}=e;for(;o;){if(o.dataset&&o.dataset[n]!==void 0)return!0;o=o.parentElement}return!1}function sn(e){return n=>{n?e.value=n.$el:e.value=null}}function an(e,n,o){if(!n)return e;const t=G(e.value);let r=null;return fe(e,i=>{r!==null&&window.clearTimeout(r),i===!0?o&&!o.value?t.value=!0:r=window.setTimeout(()=>{t.value=!0},n):t.value=!1}),t}function ln(e={},n){const o=He({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:t,keyup:r}=e,i=s=>{switch(s.key){case"Control":o.ctrl=!0;break;case"Meta":o.command=!0,o.win=!0;break;case"Shift":o.shift=!0;break;case"Tab":o.tab=!0;break}t!==void 0&&Object.keys(t).forEach(l=>{if(l!==s.key)return;const c=t[l];if(typeof c=="function")c(s);else{const{stop:f=!1,prevent:w=!1}=c;f&&s.stopPropagation(),w&&s.preventDefault(),c.handler(s)}})},d=s=>{switch(s.key){case"Control":o.ctrl=!1;break;case"Meta":o.command=!1,o.win=!1;break;case"Shift":o.shift=!1;break;case"Tab":o.tab=!1;break}r!==void 0&&Object.keys(r).forEach(l=>{if(l!==s.key)return;const c=r[l];if(typeof c=="function")c(s);else{const{stop:f=!1,prevent:w=!1}=c;f&&s.stopPropagation(),w&&s.preventDefault(),c.handler(s)}})},a=()=>{(n===void 0||n.value)&&(X("keydown",document,i),X("keyup",document,d)),n!==void 0&&fe(n,s=>{s?(X("keydown",document,i),X("keyup",document,d)):(Q("keydown",document,i),Q("keyup",document,d))})};return Ge()?(We(a),Ue(()=>{(n===void 0||n.value)&&(Q("keydown",document,i),Q("keyup",document,d))})):a(),Ve(o)}const un=$({name:"ChevronRight",render(){return h("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}});function me(e){return Array.isArray(e)?e:[e]}const le={STOP:"STOP"};function Ke(e,n){const o=n(e);e.children!==void 0&&o!==le.STOP&&e.children.forEach(t=>Ke(t,n))}function cn(e,n={}){const{preserveGroup:o=!1}=n,t=[],r=o?d=>{d.isLeaf||(t.push(d.key),i(d.children))}:d=>{d.isLeaf||(d.isGroup||t.push(d.key),i(d.children))};function i(d){d.forEach(r)}return i(e),t}function fn(e,n){const{isLeaf:o}=e;return o!==void 0?o:!n(e)}function pn(e){return e.children}function hn(e){return e.key}function vn(){return!1}function gn(e,n){const{isLeaf:o}=e;return!(o===!1&&!Array.isArray(n(e)))}function yn(e){return e.disabled===!0}function mn(e,n){return e.isLeaf===!1&&!Array.isArray(n(e))}function de(e){var n;return e==null?[]:Array.isArray(e)?e:(n=e.checkedKeys)!==null&&n!==void 0?n:[]}function se(e){var n;return e==null||Array.isArray(e)?[]:(n=e.indeterminateKeys)!==null&&n!==void 0?n:[]}function bn(e,n){const o=new Set(e);return n.forEach(t=>{o.has(t)||o.add(t)}),Array.from(o)}function wn(e,n){const o=new Set(e);return n.forEach(t=>{o.has(t)&&o.delete(t)}),Array.from(o)}function xn(e){return e?.type==="group"}function no(e){const n=new Map;return e.forEach((o,t)=>{n.set(o.key,t)}),o=>{var t;return(t=n.get(o))!==null&&t!==void 0?t:null}}class Sn extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function kn(e,n,o,t){return ne(n.concat(e),o,t,!1)}function Pn(e,n){const o=new Set;return e.forEach(t=>{const r=n.treeNodeMap.get(t);if(r!==void 0){let i=r.parent;for(;i!==null&&!(i.disabled||o.has(i.key));)o.add(i.key),i=i.parent}}),o}function Nn(e,n,o,t){const r=ne(n,o,t,!1),i=ne(e,o,t,!0),d=Pn(e,o),a=[];return r.forEach(s=>{(i.has(s)||d.has(s))&&a.push(s)}),a.forEach(s=>r.delete(s)),r}function ae(e,n){const{checkedKeys:o,keysToCheck:t,keysToUncheck:r,indeterminateKeys:i,cascade:d,leafOnly:a,checkStrategy:s,allowNotLoaded:l}=e;if(!d)return t!==void 0?{checkedKeys:bn(o,t),indeterminateKeys:Array.from(i)}:r!==void 0?{checkedKeys:wn(o,r),indeterminateKeys:Array.from(i)}:{checkedKeys:Array.from(o),indeterminateKeys:Array.from(i)};const{levelTreeNodeMap:c}=n;let f;r!==void 0?f=Nn(r,o,n,l):t!==void 0?f=kn(t,o,n,l):f=ne(o,n,l,!1);const w=s==="parent",R=s==="child"||a,b=f,T=new Set,N=Math.max.apply(null,Array.from(c.keys()));for(let K=N;K>=0;K-=1){const j=K===0,E=c.get(K);for(const u of E){if(u.isLeaf)continue;const{key:p,shallowLoaded:C}=u;if(R&&C&&u.children.forEach(x=>{!x.disabled&&!x.isLeaf&&x.shallowLoaded&&b.has(x.key)&&b.delete(x.key)}),u.disabled||!C)continue;let L=!0,O=!1,A=!0;for(const x of u.children){const F=x.key;if(!x.disabled){if(A&&(A=!1),b.has(F))O=!0;else if(T.has(F)){O=!0,L=!1;break}else if(L=!1,O)break}}L&&!A?(w&&u.children.forEach(x=>{!x.disabled&&b.has(x.key)&&b.delete(x.key)}),b.add(p)):O&&T.add(p),j&&R&&b.has(p)&&b.delete(p)}}return{checkedKeys:Array.from(b),indeterminateKeys:Array.from(T)}}function ne(e,n,o,t){const{treeNodeMap:r,getChildren:i}=n,d=new Set,a=new Set(e);return e.forEach(s=>{const l=r.get(s);l!==void 0&&Ke(l,c=>{if(c.disabled)return le.STOP;const{key:f}=c;if(!d.has(f)&&(d.add(f),a.add(f),mn(c.rawNode,i))){if(t)return le.STOP;if(!o)throw new Sn}})}),a}function Cn(e,{includeGroup:n=!1,includeSelf:o=!0},t){var r;const i=t.treeNodeMap;let d=e==null?null:(r=i.get(e))!==null&&r!==void 0?r:null;const a={keyPath:[],treeNodePath:[],treeNode:d};if(d?.ignored)return a.treeNode=null,a;for(;d;)!d.ignored&&(n||!d.isGroup)&&a.treeNodePath.push(d),d=d.parent;return a.treeNodePath.reverse(),o||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(s=>s.key),a}function Kn(e){if(e.length===0)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}function In(e,n){const o=e.siblings,t=o.length,{index:r}=e;return n?o[(r+1)%t]:r===o.length-1?null:o[r+1]}function be(e,n,{loop:o=!1,includeDisabled:t=!1}={}){const r=n==="prev"?Rn:In,i={reverse:n==="prev"};let d=!1,a=null;function s(l){if(l!==null){if(l===e){if(!d)d=!0;else if(!e.disabled&&!e.isGroup){a=e;return}}else if((!l.disabled||t)&&!l.ignored&&!l.isGroup){a=l;return}if(l.isGroup){const c=he(l,i);c!==null?a=c:s(r(l,o))}else{const c=r(l,!1);if(c!==null)s(c);else{const f=An(l);f?.isGroup?s(r(f,o)):o&&s(r(l,!0))}}}}return s(e),a}function Rn(e,n){const o=e.siblings,t=o.length,{index:r}=e;return n?o[(r-1+t)%t]:r===0?null:o[r-1]}function An(e){return e.parent}function he(e,n={}){const{reverse:o=!1}=n,{children:t}=e;if(t){const{length:r}=t,i=o?r-1:0,d=o?-1:r,a=o?-1:1;for(let s=i;s!==d;s+=a){const l=t[s];if(!l.disabled&&!l.ignored)if(l.isGroup){const c=he(l,n);if(c!==null)return c}else return l}}return null}const On={getChild(){return this.ignored?null:he(this)},getParent(){const{parent:e}=this;return e?.isGroup?e.getParent():e},getNext(e={}){return be(this,"next",e)},getPrev(e={}){return be(this,"prev",e)}};function Tn(e,n){const o=n?new Set(n):void 0,t=[];function r(i){i.forEach(d=>{t.push(d),!(d.isLeaf||!d.children||d.ignored)&&(d.isGroup||o===void 0||o.has(d.key))&&r(d.children)})}return r(e),t}function Ln(e,n){const o=e.key;for(;n;){if(n.key===o)return!0;n=n.parent}return!1}function Ie(e,n,o,t,r,i=null,d=0){const a=[];return e.forEach((s,l)=>{var c;const f=Object.create(t);if(f.rawNode=s,f.siblings=a,f.level=d,f.index=l,f.isFirstChild=l===0,f.isLastChild=l+1===e.length,f.parent=i,!f.ignored){const w=r(s);Array.isArray(w)&&(f.children=Ie(w,n,o,t,r,f,d+1))}a.push(f),n.set(f.key,f),o.has(d)||o.set(d,[]),(c=o.get(d))===null||c===void 0||c.push(f)}),a}function _n(e,n={}){var o;const t=new Map,r=new Map,{getDisabled:i=yn,getIgnored:d=vn,getIsGroup:a=xn,getKey:s=hn}=n,l=(o=n.getChildren)!==null&&o!==void 0?o:pn,c=n.ignoreEmptyChildren?u=>{const p=l(u);return Array.isArray(p)?p.length?p:null:p}:l,f=Object.assign({get key(){return s(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return fn(this.rawNode,c)},get shallowLoaded(){return gn(this.rawNode,c)},get ignored(){return d(this.rawNode)},contains(u){return Ln(this,u)}},On),w=Ie(e,t,r,f,c);function R(u){if(u==null)return null;const p=t.get(u);return p&&!p.isGroup&&!p.ignored?p:null}function b(u){if(u==null)return null;const p=t.get(u);return p&&!p.ignored?p:null}function T(u,p){const C=b(u);return C?C.getPrev(p):null}function N(u,p){const C=b(u);return C?C.getNext(p):null}function K(u){const p=b(u);return p?p.getParent():null}function j(u){const p=b(u);return p?p.getChild():null}const E={treeNodes:w,treeNodeMap:t,levelTreeNodeMap:r,maxLevel:Math.max(...r.keys()),getChildren:c,getFlattenedNodes(u){return Tn(w,u)},getNode:R,getPrev:T,getNext:N,getParent:K,getChild:j,getFirstAvailableNode(){return Kn(w)},getPath(u,p={}){return Cn(u,p,E)},getCheckedKeys(u,p={}){const{cascade:C=!0,leafOnly:L=!1,checkStrategy:O="all",allowNotLoaded:A=!1}=p;return ae({checkedKeys:de(u),indeterminateKeys:se(u),cascade:C,leafOnly:L,checkStrategy:O,allowNotLoaded:A},E)},check(u,p,C={}){const{cascade:L=!0,leafOnly:O=!1,checkStrategy:A="all",allowNotLoaded:x=!1}=C;return ae({checkedKeys:de(p),indeterminateKeys:se(p),keysToCheck:u==null?[]:me(u),cascade:L,leafOnly:O,checkStrategy:A,allowNotLoaded:x},E)},uncheck(u,p,C={}){const{cascade:L=!0,leafOnly:O=!1,checkStrategy:A="all",allowNotLoaded:x=!1}=C;return ae({checkedKeys:de(p),indeterminateKeys:se(p),keysToUncheck:u==null?[]:me(u),cascade:L,leafOnly:O,checkStrategy:A,allowNotLoaded:x},E)},getNonLeafKeys(u={}){return cn(w,u)}};return E}const En={padding:"8px 14px"},Fn=e=>{const{borderRadius:n,boxShadow2:o,baseColor:t}=e;return Object.assign(Object.assign({},En),{borderRadius:n,boxShadow:o,color:qe(t,"rgba(0, 0, 0, .85)"),textColor:t})},Mn=ke({name:"Tooltip",common:Pe,peers:{Popover:xe},self:Fn}),jn=Mn,Dn={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"},zn=e=>{const{primaryColor:n,textColor2:o,dividerColor:t,hoverColor:r,popoverColor:i,invertedColor:d,borderRadius:a,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:c,fontSizeHuge:f,heightSmall:w,heightMedium:R,heightLarge:b,heightHuge:T,textColor3:N,opacityDisabled:K}=e;return Object.assign(Object.assign({},Dn),{optionHeightSmall:w,optionHeightMedium:R,optionHeightLarge:b,optionHeightHuge:T,borderRadius:a,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:c,fontSizeHuge:f,optionTextColor:o,optionTextColorHover:o,optionTextColorActive:n,optionTextColorChildActive:n,color:i,dividerColor:t,suffixColor:o,prefixColor:o,optionColorHover:r,optionColorActive:Ze(n,{alpha:.1}),groupHeaderTextColor:N,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:d,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:n,optionColorActiveInverted:n,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:K})},Bn=ke({name:"Dropdown",common:Pe,peers:{Popover:xe},self:zn}),$n=Bn,Hn=Object.assign(Object.assign({},ce),oe.props),oo=$({name:"Tooltip",props:Hn,__popover__:!0,setup(e){const n=oe("Tooltip","-tooltip",void 0,jn,e),o=G(null);return Object.assign(Object.assign({},{syncPosition(){o.value.syncPosition()},setShow(r){o.value.setShow(r)}}),{popoverRef:o,mergedTheme:n,popoverThemeOverrides:I(()=>n.value.self)})},render(){const{mergedTheme:e,internalExtraClass:n}=this;return h(Se,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:n.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),Re=$({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return h("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),ve=pe("n-dropdown-menu"),te=pe("n-dropdown"),we=pe("n-dropdown-option");function ue(e,n){return e.type==="submenu"||e.type===void 0&&e[n]!==void 0}function Gn(e){return e.type==="group"}function Ae(e){return e.type==="divider"}function Wn(e){return e.type==="render"}const Oe=$({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const n=q(te),{hoverKeyRef:o,keyboardKeyRef:t,lastToggledSubmenuKeyRef:r,pendingKeyPathRef:i,activeKeyPathRef:d,animatedRef:a,mergedShowRef:s,renderLabelRef:l,renderIconRef:c,labelFieldRef:f,childrenFieldRef:w,renderOptionRef:R,nodePropsRef:b,menuPropsRef:T}=n,N=q(we,null),K=q(ve),j=q(Ne),E=I(()=>e.tmNode.rawNode),u=I(()=>{const{value:g}=w;return ue(e.tmNode.rawNode,g)}),p=I(()=>{const{disabled:g}=e.tmNode;return g}),C=I(()=>{if(!u.value)return!1;const{key:g,disabled:P}=e.tmNode;if(P)return!1;const{value:D}=o,{value:W}=t,{value:re}=r,{value:U}=i;return D!==null?U.includes(g):W!==null?U.includes(g)&&U[U.length-1]!==g:re!==null?U.includes(g):!1}),L=I(()=>t.value===null&&!a.value),O=an(C,300,L),A=I(()=>!!N?.enteringSubmenuRef.value),x=G(!1);J(we,{enteringSubmenuRef:x});function F(){x.value=!0}function v(){x.value=!1}function k(){const{parentKey:g,tmNode:P}=e;P.disabled||s.value&&(r.value=g,t.value=null,o.value=P.key)}function m(){const{tmNode:g}=e;g.disabled||s.value&&o.value!==g.key&&k()}function y(g){if(e.tmNode.disabled||!s.value)return;const{relatedTarget:P}=g;P&&!ye({target:P},"dropdownOption")&&!ye({target:P},"scrollbarRail")&&(o.value=null)}function _(){const{value:g}=u,{tmNode:P}=e;s.value&&!g&&!P.disabled&&(n.doSelect(P.key,P.rawNode),n.doUpdateShow(!1))}return{labelField:f,renderLabel:l,renderIcon:c,siblingHasIcon:K.showIconRef,siblingHasSubmenu:K.hasSubmenuRef,menuProps:T,popoverBody:j,animated:a,mergedShowSubmenu:I(()=>O.value&&!A.value),rawNode:E,hasSubmenu:u,pending:Y(()=>{const{value:g}=i,{key:P}=e.tmNode;return g.includes(P)}),childActive:Y(()=>{const{value:g}=d,{key:P}=e.tmNode,D=g.findIndex(W=>P===W);return D===-1?!1:D<g.length-1}),active:Y(()=>{const{value:g}=d,{key:P}=e.tmNode,D=g.findIndex(W=>P===W);return D===-1?!1:D===g.length-1}),mergedDisabled:p,renderOption:R,nodeProps:b,handleClick:_,handleMouseMove:m,handleMouseEnter:k,handleMouseLeave:y,handleSubmenuBeforeEnter:F,handleSubmenuAfterEnter:v}},render(){var e,n;const{animated:o,rawNode:t,mergedShowSubmenu:r,clsPrefix:i,siblingHasIcon:d,siblingHasSubmenu:a,renderLabel:s,renderIcon:l,renderOption:c,nodeProps:f,props:w,scrollable:R}=this;let b=null;if(r){const j=(e=this.menuProps)===null||e===void 0?void 0:e.call(this,t,t.children);b=h(Te,Object.assign({},j,{clsPrefix:i,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const T={class:[`${i}-dropdown-option-body`,this.pending&&`${i}-dropdown-option-body--pending`,this.active&&`${i}-dropdown-option-body--active`,this.childActive&&`${i}-dropdown-option-body--child-active`,this.mergedDisabled&&`${i}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},N=f?.(t),K=h("div",Object.assign({class:[`${i}-dropdown-option`,N?.class],"data-dropdown-option":!0},N),h("div",Ce(T,w),[h("div",{class:[`${i}-dropdown-option-body__prefix`,d&&`${i}-dropdown-option-body__prefix--show-icon`]},[l?l(t):ee(t.icon)]),h("div",{"data-dropdown-option":!0,class:`${i}-dropdown-option-body__label`},s?s(t):ee((n=t[this.labelField])!==null&&n!==void 0?n:t.title)),h("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,a&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?h(ze,null,{default:()=>h(un,null)}):null)]),this.hasSubmenu?h(Me,null,{default:()=>[h(je,null,{default:()=>h("div",{class:`${i}-dropdown-offset-container`},h(De,{show:this.mergedShowSubmenu,placement:this.placement,to:R&&this.popoverBody||void 0,teleportDisabled:!R},{default:()=>h("div",{class:`${i}-dropdown-menu-wrapper`},o?h(Je,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>b}):b)}))})]}):null);return c?c({node:K,option:t}):K}}),Un=$({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:n}=q(ve),{renderLabelRef:o,labelFieldRef:t,nodePropsRef:r,renderOptionRef:i}=q(te);return{labelField:t,showIcon:e,hasSubmenu:n,renderLabel:o,nodeProps:r,renderOption:i}},render(){var e;const{clsPrefix:n,hasSubmenu:o,showIcon:t,nodeProps:r,renderLabel:i,renderOption:d}=this,{rawNode:a}=this.tmNode,s=h("div",Object.assign({class:`${n}-dropdown-option`},r?.(a)),h("div",{class:`${n}-dropdown-option-body ${n}-dropdown-option-body--group`},h("div",{"data-dropdown-option":!0,class:[`${n}-dropdown-option-body__prefix`,t&&`${n}-dropdown-option-body__prefix--show-icon`]},ee(a.icon)),h("div",{class:`${n}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(a):ee((e=a.title)!==null&&e!==void 0?e:a[this.labelField])),h("div",{class:[`${n}-dropdown-option-body__suffix`,o&&`${n}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return d?d({node:s,option:a}):s}}),Vn=$({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:n,clsPrefix:o}=this,{children:t}=e;return h(Xe,null,h(Un,{clsPrefix:o,tmNode:e,key:e.key}),t?.map(r=>{const{rawNode:i}=r;return i.show===!1?null:Ae(i)?h(Re,{clsPrefix:o,key:r.key}):r.isGroup?(Qe("dropdown","`group` node is not allowed to be put in `group` node."),null):h(Oe,{clsPrefix:o,tmNode:r,parentKey:n,key:r.key})}))}}),qn=$({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:n}}=this.tmNode;return h("div",n,[e?.()])}}),Te=$({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:n,childrenFieldRef:o}=q(te);J(ve,{showIconRef:I(()=>{const r=n.value;return e.tmNodes.some(i=>{var d;if(i.isGroup)return(d=i.children)===null||d===void 0?void 0:d.some(({rawNode:s})=>r?r(s):s.icon);const{rawNode:a}=i;return r?r(a):a.icon})}),hasSubmenuRef:I(()=>{const{value:r}=o;return e.tmNodes.some(i=>{var d;if(i.isGroup)return(d=i.children)===null||d===void 0?void 0:d.some(({rawNode:s})=>ue(s,r));const{rawNode:a}=i;return ue(a,r)})})});const t=G(null);return J(Ye,null),J(en,null),J(Ne,t),{bodyRef:t}},render(){const{parentKey:e,clsPrefix:n,scrollable:o}=this,t=this.tmNodes.map(r=>{const{rawNode:i}=r;return i.show===!1?null:Wn(i)?h(qn,{tmNode:r,key:r.key}):Ae(i)?h(Re,{clsPrefix:n,key:r.key}):Gn(i)?h(Vn,{clsPrefix:n,tmNode:r,parentKey:e,key:r.key}):h(Oe,{clsPrefix:n,tmNode:r,parentKey:e,key:r.key,props:i.props,scrollable:o})});return h("div",{class:[`${n}-dropdown-menu`,o&&`${n}-dropdown-menu--scrollable`],ref:"bodyRef"},o?h(nn,{contentClass:`${n}-dropdown-menu__content`},{default:()=>t}):t,this.showArrow?Be({clsPrefix:n,arrowStyle:this.arrowStyle}):null)}}),Zn=M("dropdown-menu",`
 transform-origin: var(--v-transform-origin);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 position: relative;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[on(),M("dropdown-option",`
 position: relative;
 `,[Z("a",`
 text-decoration: none;
 color: inherit;
 outline: none;
 `,[Z("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),M("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 position: relative;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition: color .3s var(--n-bezier);
 `,[Z("&::before",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 left: 4px;
 right: 4px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `),ge("disabled",[z("pending",`
 color: var(--n-option-text-color-hover);
 `,[H("prefix, suffix",`
 color: var(--n-option-text-color-hover);
 `),Z("&::before","background-color: var(--n-option-color-hover);")]),z("active",`
 color: var(--n-option-text-color-active);
 `,[H("prefix, suffix",`
 color: var(--n-option-text-color-active);
 `),Z("&::before","background-color: var(--n-option-color-active);")]),z("child-active",`
 color: var(--n-option-text-color-child-active);
 `,[H("prefix, suffix",`
 color: var(--n-option-text-color-child-active);
 `)])]),z("disabled",`
 cursor: not-allowed;
 opacity: var(--n-option-opacity-disabled);
 `),z("group",`
 font-size: calc(var(--n-font-size) - 1px);
 color: var(--n-group-header-text-color);
 `,[H("prefix",`
 width: calc(var(--n-option-prefix-width) / 2);
 `,[z("show-icon",`
 width: calc(var(--n-option-icon-prefix-width) / 2);
 `)])]),H("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 z-index: 1;
 `,[z("show-icon",`
 width: var(--n-option-icon-prefix-width);
 `),M("icon",`
 font-size: var(--n-option-icon-size);
 `)]),H("label",`
 white-space: nowrap;
 flex: 1;
 z-index: 1;
 `),H("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 z-index: 1;
 `,[z("has-submenu",`
 width: var(--n-option-icon-suffix-width);
 `),M("icon",`
 font-size: var(--n-option-icon-size);
 `)]),M("dropdown-menu","pointer-events: all;")]),M("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),M("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),M("dropdown-menu-wrapper",`
 transform-origin: var(--v-transform-origin);
 width: fit-content;
 `),Z(">",[M("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),ge("scrollable",`
 padding: var(--n-padding);
 `),z("scrollable",[H("content",`
 padding: var(--n-padding);
 `)])]),Jn={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},Qn=Object.keys(ce),Xn=Object.assign(Object.assign(Object.assign({},ce),Jn),oe.props),to=$({name:"Dropdown",inheritAttrs:!1,props:Xn,setup(e){const n=G(!1),o=$e(B(e,"show"),n),t=I(()=>{const{keyField:v,childrenField:k}=e;return _n(e.options,{getKey(m){return m[v]},getDisabled(m){return m.disabled===!0},getIgnored(m){return m.type==="divider"||m.type==="render"},getChildren(m){return m[k]}})}),r=I(()=>t.value.treeNodes),i=G(null),d=G(null),a=G(null),s=I(()=>{var v,k,m;return(m=(k=(v=i.value)!==null&&v!==void 0?v:d.value)!==null&&k!==void 0?k:a.value)!==null&&m!==void 0?m:null}),l=I(()=>t.value.getPath(s.value).keyPath),c=I(()=>t.value.getPath(e.value).keyPath),f=Y(()=>e.keyboard&&o.value);ln({keydown:{ArrowUp:{prevent:!0,handler:p},ArrowRight:{prevent:!0,handler:u},ArrowDown:{prevent:!0,handler:C},ArrowLeft:{prevent:!0,handler:E},Enter:{prevent:!0,handler:L},Escape:j}},f);const{mergedClsPrefixRef:w,inlineThemeDisabled:R}=tn(e),b=oe("Dropdown","-dropdown",Zn,$n,e,w);J(te,{labelFieldRef:B(e,"labelField"),childrenFieldRef:B(e,"childrenField"),renderLabelRef:B(e,"renderLabel"),renderIconRef:B(e,"renderIcon"),hoverKeyRef:i,keyboardKeyRef:d,lastToggledSubmenuKeyRef:a,pendingKeyPathRef:l,activeKeyPathRef:c,animatedRef:B(e,"animated"),mergedShowRef:o,nodePropsRef:B(e,"nodeProps"),renderOptionRef:B(e,"renderOption"),menuPropsRef:B(e,"menuProps"),doSelect:T,doUpdateShow:N}),fe(o,v=>{!e.animated&&!v&&K()});function T(v,k){const{onSelect:m}=e;m&&ie(m,v,k)}function N(v){const{"onUpdate:show":k,onUpdateShow:m}=e;k&&ie(k,v),m&&ie(m,v),n.value=v}function K(){i.value=null,d.value=null,a.value=null}function j(){N(!1)}function E(){A("left")}function u(){A("right")}function p(){A("up")}function C(){A("down")}function L(){const v=O();v?.isLeaf&&o.value&&(T(v.key,v.rawNode),N(!1))}function O(){var v;const{value:k}=t,{value:m}=s;return!k||m===null?null:(v=k.getNode(m))!==null&&v!==void 0?v:null}function A(v){const{value:k}=s,{value:{getFirstAvailableNode:m}}=t;let y=null;if(k===null){const _=m();_!==null&&(y=_.key)}else{const _=O();if(_){let g;switch(v){case"down":g=_.getNext();break;case"up":g=_.getPrev();break;case"right":g=_.getChild();break;case"left":g=_.getParent();break}g&&(y=g.key)}}y!==null&&(i.value=null,d.value=y)}const x=I(()=>{const{size:v,inverted:k}=e,{common:{cubicBezierEaseInOut:m},self:y}=b.value,{padding:_,dividerColor:g,borderRadius:P,optionOpacityDisabled:D,[V("optionIconSuffixWidth",v)]:W,[V("optionSuffixWidth",v)]:re,[V("optionIconPrefixWidth",v)]:U,[V("optionPrefixWidth",v)]:Le,[V("fontSize",v)]:_e,[V("optionHeight",v)]:Ee,[V("optionIconSize",v)]:Fe}=y,S={"--n-bezier":m,"--n-font-size":_e,"--n-padding":_,"--n-border-radius":P,"--n-option-height":Ee,"--n-option-prefix-width":Le,"--n-option-icon-prefix-width":U,"--n-option-suffix-width":re,"--n-option-icon-suffix-width":W,"--n-option-icon-size":Fe,"--n-divider-color":g,"--n-option-opacity-disabled":D};return k?(S["--n-color"]=y.colorInverted,S["--n-option-color-hover"]=y.optionColorHoverInverted,S["--n-option-color-active"]=y.optionColorActiveInverted,S["--n-option-text-color"]=y.optionTextColorInverted,S["--n-option-text-color-hover"]=y.optionTextColorHoverInverted,S["--n-option-text-color-active"]=y.optionTextColorActiveInverted,S["--n-option-text-color-child-active"]=y.optionTextColorChildActiveInverted,S["--n-prefix-color"]=y.prefixColorInverted,S["--n-suffix-color"]=y.suffixColorInverted,S["--n-group-header-text-color"]=y.groupHeaderTextColorInverted):(S["--n-color"]=y.color,S["--n-option-color-hover"]=y.optionColorHover,S["--n-option-color-active"]=y.optionColorActive,S["--n-option-text-color"]=y.optionTextColor,S["--n-option-text-color-hover"]=y.optionTextColorHover,S["--n-option-text-color-active"]=y.optionTextColorActive,S["--n-option-text-color-child-active"]=y.optionTextColorChildActive,S["--n-prefix-color"]=y.prefixColor,S["--n-suffix-color"]=y.suffixColor,S["--n-group-header-text-color"]=y.groupHeaderTextColor),S}),F=R?rn("dropdown",I(()=>`${e.size[0]}${e.inverted?"i":""}`),x,e):void 0;return{mergedClsPrefix:w,mergedTheme:b,tmNodes:r,mergedShow:o,handleAfterLeave:()=>{e.animated&&K()},doUpdateShow:N,cssVars:R?void 0:x,themeClass:F?.themeClass,onRender:F?.onRender}},render(){const e=(t,r,i,d,a)=>{var s;const{mergedClsPrefix:l,menuProps:c}=this;(s=this.onRender)===null||s===void 0||s.call(this);const f=c?.(void 0,this.tmNodes.map(R=>R.rawNode))||{},w={ref:sn(r),class:[t,`${l}-dropdown`,this.themeClass],clsPrefix:l,tmNodes:this.tmNodes,style:[i,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:d,onMouseleave:a};return h(Te,Ce(this.$attrs,w,f))},{mergedTheme:n}=this,o={show:this.mergedShow,theme:n.peers.Popover,themeOverrides:n.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:e,onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return h(Se,Object.assign({},dn(this.$props,Qn),o),{trigger:()=>{var t,r;return(r=(t=this.$slots).default)===null||r===void 0?void 0:r.call(t)}})}});export{un as C,to as N,oo as a,no as b,_n as c,$n as d,sn as e,ye as h,jn as t};
