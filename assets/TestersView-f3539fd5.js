import{e as z,h as m,f as at,i as se,N,C as lt,a8 as st,k as _,t as pe,y as ot,z as ae,q as b,g as A,j as J,v as R,x as ge,H as nt,l as it,u as Se,aQ as ut,p as dt,aS as ct,bo as ft,ad as q,al as mt,A as ce,o as C,R as F,w as u,a,S as r,$ as P,b as S,a0 as j,d as U,c as L,a4 as W,U as pt,bp as ve,F as X,a2 as Ce,a3 as we,a1 as H,Y as vt,J as ht}from"./index-e7fb9abe.js";import{g as gt,V as bt,u as oe}from"./testerStore-c87dd1df.js";import{u as Z,N as ke,a as le,P as _t}from"./groupStore-fb46ec23.js";import{u as Te,D as Re,N as ze,a as Ue,b as yt}from"./DeleteFilled-5d540d40.js";import{u as V}from"./use-message-450c0545.js";import{N as Y}from"./Icon-6e576580.js";import{N as G}from"./Spin-ff46ac0b.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{a as xt,A as Ae,b as Ne}from"./AddRound-a759ae98.js";import{N as O}from"./Input-00751233.js";import{b as Fe,N as St}from"./headers-de3dd4d5.js";import{u as Ct,a as Q}from"./Suffix-92a8883e.js";import{u as wt,N as kt}from"./Popover-045cd7c7.js";import"./use-compitable-bbfa6a86.js";import"./create-aae2c7cf.js";import"./Forward-c343a72b.js";import"./create-ref-setter-f485918b.js";const Tt=z({name:"Search",render(){return m("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:"enable-background: new 0 0 512 512"},m("path",{d:`M443.5,420.2L336.7,312.4c20.9-26.2,33.5-59.4,33.5-95.5c0-84.5-68.5-153-153.1-153S64,132.5,64,217s68.5,153,153.1,153
  c36.6,0,70.1-12.8,96.5-34.2l106.1,107.1c3.2,3.4,7.6,5.1,11.9,5.1c4.1,0,8.2-1.5,11.3-4.5C449.5,437.2,449.7,426.8,443.5,420.2z
   M217.1,337.1c-32.1,0-62.3-12.5-85-35.2c-22.7-22.7-35.2-52.9-35.2-84.9c0-32.1,12.5-62.3,35.2-84.9c22.7-22.7,52.9-35.2,85-35.2
  c32.1,0,62.3,12.5,85,35.2c22.7,22.7,35.2,52.9,35.2,84.9c0,32.1-12.5,62.3-35.2,84.9C279.4,324.6,249.2,337.1,217.1,337.1z`}))}}),te=at("n-transfer"),be=z({name:"TransferHeader",props:{size:{type:String,required:!0},source:Boolean,onCheckedAll:Function,onClearAll:Function,title:String},setup(e){const{targetOptionsRef:l,canNotSelectAnythingRef:d,canBeClearedRef:i,allCheckedRef:n,mergedThemeRef:s,disabledRef:c,mergedClsPrefixRef:t,srcOptionsLengthRef:v}=se(te),{localeRef:f}=Ct("Transfer");return()=>{const{source:h,onClearAll:o,onCheckedAll:w}=e,{value:y}=s,{value:x}=t,{value:k}=f,B=e.size==="large"?"small":"tiny",{title:M}=e;return m("div",{class:`${x}-transfer-list-header`},M&&m("div",{class:`${x}-transfer-list-header__title`},M),h&&m(N,{class:`${x}-transfer-list-header__button`,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,size:B,tertiary:!0,onClick:n.value?o:w,disabled:d.value||c.value},{default:()=>n.value?k.unselectAll:k.selectAll}),!h&&i.value&&m(N,{class:`${x}-transfer-list-header__button`,theme:y.peers.Button,themeOverrides:y.peerOverrides.Button,size:B,tertiary:!0,onClick:o,disabled:c.value},{default:()=>k.clearAll}),m("div",{class:`${x}-transfer-list-header__extra`},h?k.total(v.value):k.selected(l.value.length)))}}}),_e=z({name:"NTransferListItem",props:{source:Boolean,label:{type:String,required:!0},value:{type:[String,Number],required:!0},disabled:Boolean,option:{type:Object,required:!0}},setup(e){const{targetValueSetRef:l,mergedClsPrefixRef:d,mergedThemeRef:i,handleItemCheck:n,renderSourceLabelRef:s,renderTargetLabelRef:c,showSelectedRef:t}=se(te),v=lt(()=>l.value.has(e.value));function f(){e.disabled||n(!v.value,e.value)}return{mergedClsPrefix:d,mergedTheme:i,checked:v,showSelected:t,renderSourceLabel:s,renderTargetLabel:c,handleClick:f}},render(){const{disabled:e,mergedTheme:l,mergedClsPrefix:d,label:i,checked:n,source:s,renderSourceLabel:c,renderTargetLabel:t}=this;return m("div",{class:[`${d}-transfer-list-item`,e&&`${d}-transfer-list-item--disabled`,s?`${d}-transfer-list-item--source`:`${d}-transfer-list-item--target`],onClick:s?this.handleClick:void 0},m("div",{class:`${d}-transfer-list-item__background`}),s&&this.showSelected&&m("div",{class:`${d}-transfer-list-item__checkbox`},m(xt,{theme:l.peers.Checkbox,themeOverrides:l.peerOverrides.Checkbox,disabled:e,checked:n})),m("div",{class:`${d}-transfer-list-item__label`,title:gt(i)},s?c?c({option:this.option}):i:t?t({option:this.option}):i),!s&&!e&&m(st,{focusable:!1,class:`${d}-transfer-list-item__close`,clsPrefix:d,onClick:this.handleClick}))}}),ye=z({name:"TransferList",props:{virtualScroll:{type:Boolean,required:!0},itemSize:{type:Number,required:!0},options:{type:Array,required:!0},disabled:{type:Boolean,required:!0},source:Boolean},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:l}=se(te),d=_(null),i=_(null);function n(){var t;(t=d.value)===null||t===void 0||t.sync()}function s(){const{value:t}=i;if(!t)return null;const{listElRef:v}=t;return v}function c(){const{value:t}=i;if(!t)return null;const{itemsElRef:v}=t;return v}return{mergedTheme:e,mergedClsPrefix:l,scrollerInstRef:d,vlInstRef:i,syncVLScroller:n,scrollContainer:s,scrollContent:c}},render(){const{mergedTheme:e,options:l}=this;if(l.length===0)return m(Q,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty});const{mergedClsPrefix:d,virtualScroll:i,source:n,disabled:s,syncVLScroller:c}=this;return m(pe,{ref:"scrollerInstRef",theme:e.peers.Scrollbar,themeOverrides:e.peerOverrides.Scrollbar,container:i?this.scrollContainer:void 0,content:i?this.scrollContent:void 0},{default:()=>i?m(bt,{ref:"vlInstRef",style:{height:"100%"},class:`${d}-transfer-list-content`,items:this.options,itemSize:this.itemSize,showScrollbar:!1,onResize:c,onScroll:c,keyField:"value"},{default:({item:t})=>{const{source:v,disabled:f}=this;return m(_e,{source:v,key:t.value,value:t.value,disabled:t.disabled||f,label:t.label,option:t})}}):m("div",{class:`${d}-transfer-list-content`},l.map(t=>m(_e,{source:n,key:t.value,value:t.value,disabled:t.disabled||s,label:t.label,option:t})))})}}),xe=z({name:"TransferFilter",props:{value:String,placeholder:String,disabled:Boolean,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:l}=se(te);return{mergedClsPrefix:l,mergedTheme:e}},render(){const{mergedTheme:e,mergedClsPrefix:l}=this;return m("div",{class:`${l}-transfer-filter`},m(O,{value:this.value,onUpdateValue:this.onUpdateValue,disabled:this.disabled,placeholder:this.placeholder,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,clearable:!0,size:"small"},{"clear-icon-placeholder":()=>m(ot,{clsPrefix:l},{default:()=>m(Tt,null)})}))}});function Rt(e){const l=_(e.defaultValue),d=wt(ae(e,"value"),l),i=b(()=>{const p=new Map;return(e.options||[]).forEach(g=>p.set(g.value,g)),p}),n=b(()=>new Set(d.value||[])),s=b(()=>{const p=i.value,g=[];return(d.value||[]).forEach(K=>{const I=p.get(K);I&&g.push(I)}),g}),c=_(""),t=_(""),v=b(()=>e.sourceFilterable||!!e.filterable),f=b(()=>{const{showSelected:p,options:g,filter:K}=e;return v.value?g.filter(I=>K(c.value,I,"source")&&(p||!n.value.has(I.value))):p?g:g.filter(I=>!n.value.has(I.value))}),h=b(()=>{if(!e.targetFilterable)return s.value;const{filter:p}=e;return s.value.filter(g=>p(t.value,g,"target"))}),o=b(()=>{const{value:p}=d;return p===null?new Set:new Set(p)}),w=b(()=>{const p=new Set(o.value);return f.value.forEach(g=>{!g.disabled&&!p.has(g.value)&&p.add(g.value)}),p}),y=b(()=>{const p=new Set(o.value);return f.value.forEach(g=>{!g.disabled&&p.has(g.value)&&p.delete(g.value)}),p}),x=b(()=>{const p=new Set(o.value);return h.value.forEach(g=>{g.disabled||p.delete(g.value)}),p}),k=b(()=>f.value.every(p=>p.disabled)),B=b(()=>{if(!f.value.length)return!1;const p=o.value;return f.value.every(g=>g.disabled||p.has(g.value))}),M=b(()=>h.value.some(p=>!p.disabled));function ne(p){c.value=p??""}function ie(p){t.value=p??""}return{uncontrolledValueRef:l,mergedValueRef:d,targetValueSetRef:n,valueSetForCheckAllRef:w,valueSetForUncheckAllRef:y,valueSetForClearRef:x,filteredTgtOptionsRef:h,filteredSrcOptionsRef:f,targetOptionsRef:s,canNotSelectAnythingRef:k,canBeClearedRef:M,allCheckedRef:B,srcPatternRef:c,tgtPatternRef:t,mergedSrcFilterableRef:v,handleSrcFilterUpdateValue:ne,handleTgtFilterUpdateValue:ie}}const zt=A("transfer",`
 width: 100%;
 font-size: var(--n-font-size);
 height: 300px;
 display: flex;
 flex-wrap: nowrap;
 word-break: break-word;
`,[J("disabled",[A("transfer-list",[A("transfer-list-header",[R("title",`
 color: var(--n-header-text-color-disabled);
 `),R("extra",`
 color: var(--n-header-extra-text-color-disabled);
 `)])])]),A("transfer-list",`
 flex: 1;
 min-width: 0;
 height: inherit;
 display: flex;
 flex-direction: column;
 background-clip: padding-box;
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-list-color);
 `,[J("source",`
 border-top-left-radius: var(--n-border-radius);
 border-bottom-left-radius: var(--n-border-radius);
 `,[R("border","border-right: 1px solid var(--n-divider-color);")]),J("target",`
 border-top-right-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `,[R("border","border-left: none;")]),R("border",`
 padding: 0 12px;
 border: 1px solid var(--n-border-color);
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),A("transfer-list-header",`
 min-height: var(--n-header-height);
 box-sizing: border-box;
 display: flex;
 padding: 12px 12px 10px 12px;
 align-items: center;
 background-clip: padding-box;
 border-radius: inherit;
 border-bottom-left-radius: 0;
 border-bottom-right-radius: 0;
 line-height: 1.5;
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `,[ge("> *:not(:first-child)",`
 margin-left: 8px;
 `),R("title",`
 flex: 1;
 min-width: 0;
 line-height: 1.5;
 font-size: var(--n-header-font-size);
 font-weight: var(--n-header-font-weight);
 transition: color .3s var(--n-bezier);
 color: var(--n-header-text-color);
 `),R("button",`
 position: relative;
 `),R("extra",`
 transition: color .3s var(--n-bezier);
 font-size: var(--n-extra-font-size);
 margin-right: 0;
 white-space: nowrap;
 color: var(--n-header-extra-text-color);
 `)]),A("transfer-list-body",`
 flex-basis: 0;
 flex-grow: 1;
 box-sizing: border-box;
 position: relative;
 display: flex;
 flex-direction: column;
 border-radius: inherit;
 border-top-left-radius: 0;
 border-top-right-radius: 0;
 `,[A("transfer-filter",`
 padding: 4px 12px 8px 12px;
 box-sizing: border-box;
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),A("transfer-list-flex-container",`
 flex: 1;
 position: relative;
 `,[A("scrollbar",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 height: unset;
 `),A("empty",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 `),A("transfer-list-content",`
 padding: 0;
 margin: 0;
 position: relative;
 `,[A("transfer-list-item",`
 padding: 0 12px;
 min-height: var(--n-item-height);
 display: flex;
 align-items: center;
 color: var(--n-item-text-color);
 position: relative;
 transition: color .3s var(--n-bezier);
 `,[R("background",`
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),R("checkbox",`
 position: relative;
 margin-right: 8px;
 `),R("close",`
 opacity: 0;
 pointer-events: none;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),R("label",`
 position: relative;
 min-width: 0;
 flex-grow: 1;
 `),J("source","cursor: pointer;"),J("disabled",`
 cursor: not-allowed;
 color: var(--n-item-text-color-disabled);
 `),nt("disabled",[ge("&:hover",[R("background","background-color: var(--n-item-color-pending);"),R("close",`
 opacity: 1;
 pointer-events: all;
 `)])])])])])])])]),Ut=Object.assign(Object.assign({},Se.props),{value:Array,defaultValue:{type:Array,default:null},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:void 0},virtualScroll:Boolean,sourceTitle:String,targetTitle:String,filterable:{type:Boolean,default:void 0},sourceFilterable:Boolean,targetFilterable:Boolean,showSelected:{type:Boolean,default:!0},sourceFilterPlaceholder:String,targetFilterPlaceholder:String,filter:{type:Function,default:(e,l)=>e?~(""+l.label).toLowerCase().indexOf((""+e).toLowerCase()):!0},size:String,renderSourceLabel:Function,renderTargetLabel:Function,renderSourceList:Function,renderTargetList:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),At=z({name:"Transfer",props:Ut,setup(e){const{mergedClsPrefixRef:l}=it(e),d=Se("Transfer","-transfer",zt,ft,e,l),i=ut(e),{mergedSizeRef:n,mergedDisabledRef:s}=i,c=b(()=>{const{value:T}=n,{self:{[q("itemHeight",T)]:$}}=d.value;return mt($)}),{uncontrolledValueRef:t,mergedValueRef:v,targetValueSetRef:f,valueSetForCheckAllRef:h,valueSetForUncheckAllRef:o,valueSetForClearRef:w,filteredTgtOptionsRef:y,filteredSrcOptionsRef:x,targetOptionsRef:k,canNotSelectAnythingRef:B,canBeClearedRef:M,allCheckedRef:ne,srcPatternRef:ie,tgtPatternRef:p,mergedSrcFilterableRef:g,handleSrcFilterUpdateValue:K,handleTgtFilterUpdateValue:I}=Rt(e);function D(T){const{onUpdateValue:$,"onUpdate:value":E,onChange:re}=e,{nTriggerFormInput:ue,nTriggerFormChange:de}=i;$&&ce($,T),E&&ce(E,T),re&&ce(re,T),t.value=T,ue(),de()}function Ie(){D([...h.value])}function $e(){D([...o.value])}function Pe(){D([...w.value])}function he(T,$){D(T?(v.value||[]).concat($):(v.value||[]).filter(E=>E!==$))}function Le(T){D(T)}return dt(te,{targetValueSetRef:f,mergedClsPrefixRef:l,disabledRef:s,mergedThemeRef:d,targetOptionsRef:k,canNotSelectAnythingRef:B,canBeClearedRef:M,allCheckedRef:ne,srcOptionsLengthRef:b(()=>e.options.length),handleItemCheck:he,renderSourceLabelRef:ae(e,"renderSourceLabel"),renderTargetLabelRef:ae(e,"renderTargetLabel"),showSelectedRef:ae(e,"showSelected")}),{mergedClsPrefix:l,mergedDisabled:s,itemSize:c,isMounted:ct(),mergedTheme:d,filteredSrcOpts:x,filteredTgtOpts:y,srcPattern:ie,tgtPattern:p,mergedSize:n,mergedSrcFilterable:g,handleSrcFilterUpdateValue:K,handleTgtFilterUpdateValue:I,handleSourceCheckAll:Ie,handleSourceUncheckAll:$e,handleTargetClearAll:Pe,handleItemCheck:he,handleChecked:Le,cssVars:b(()=>{const{value:T}=n,{common:{cubicBezierEaseInOut:$},self:{borderRadius:E,borderColor:re,listColor:ue,titleTextColor:de,titleTextColorDisabled:Oe,extraTextColor:Ve,itemTextColor:Ge,itemColorPending:Be,itemTextColorDisabled:Me,titleFontWeight:De,closeColorHover:Ee,closeColorPressed:qe,closeIconColor:je,closeIconColorHover:He,closeIconColorPressed:Ke,closeIconSize:Je,closeSize:Ye,dividerColor:Qe,extraTextColorDisabled:We,[q("extraFontSize",T)]:Xe,[q("fontSize",T)]:Ze,[q("titleFontSize",T)]:et,[q("itemHeight",T)]:tt,[q("headerHeight",T)]:rt}}=d.value;return{"--n-bezier":$,"--n-border-color":re,"--n-border-radius":E,"--n-extra-font-size":Xe,"--n-font-size":Ze,"--n-header-font-size":et,"--n-header-extra-text-color":Ve,"--n-header-extra-text-color-disabled":We,"--n-header-font-weight":De,"--n-header-text-color":de,"--n-header-text-color-disabled":Oe,"--n-item-color-pending":Be,"--n-item-height":tt,"--n-item-text-color":Ge,"--n-item-text-color-disabled":Me,"--n-list-color":ue,"--n-header-height":rt,"--n-close-size":Ye,"--n-close-icon-size":Je,"--n-close-color-hover":Ee,"--n-close-color-pressed":qe,"--n-close-icon-color":je,"--n-close-icon-color-hover":He,"--n-close-icon-color-pressed":Ke,"--n-divider-color":Qe}})}},render(){const{mergedClsPrefix:e,renderSourceList:l,renderTargetList:d,mergedTheme:i,mergedSrcFilterable:n,targetFilterable:s}=this;return m("div",{class:[`${e}-transfer`,this.mergedDisabled&&`${e}-transfer--disabled`],style:this.cssVars},m("div",{class:`${e}-transfer-list ${e}-transfer-list--source`},m(be,{source:!0,title:this.sourceTitle,onCheckedAll:this.handleSourceCheckAll,onClearAll:this.handleSourceUncheckAll,size:this.mergedSize}),m("div",{class:`${e}-transfer-list-body`},n?m(xe,{onUpdateValue:this.handleSrcFilterUpdateValue,value:this.srcPattern,disabled:this.mergedDisabled,placeholder:this.sourceFilterPlaceholder}):null,m("div",{class:`${e}-transfer-list-flex-container`},l?m(pe,{theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar},{default:()=>l({onCheck:this.handleChecked,checkedOptions:this.filteredTgtOpts,pattern:this.srcPattern})}):m(ye,{source:!0,options:this.filteredSrcOpts,disabled:this.mergedDisabled,virtualScroll:this.virtualScroll,itemSize:this.itemSize}))),m("div",{class:`${e}-transfer-list__border`})),m("div",{class:`${e}-transfer-list ${e}-transfer-list--target`},m(be,{onClearAll:this.handleTargetClearAll,size:this.mergedSize,title:this.targetTitle}),m("div",{class:`${e}-transfer-list-body`},s?m(xe,{onUpdateValue:this.handleTgtFilterUpdateValue,value:this.tgtPattern,disabled:this.mergedDisabled,placeholder:this.sourceFilterPlaceholder}):null,m("div",{class:`${e}-transfer-list-flex-container`},d?m(pe,{theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar},{default:()=>d({onCheck:this.handleChecked,checkedOptions:this.filteredTgtOpts,pattern:this.tgtPattern})}):m(ye,{options:this.filteredTgtOpts,disabled:this.mergedDisabled,virtualScroll:this.virtualScroll,itemSize:this.itemSize}))),m("div",{class:`${e}-transfer-list__border`})))}}),Nt={style:{color:"var(--gray-3)"}},Ft=z({__name:"TesterItem",props:{tester:{type:Object,required:!0}},setup(e){const l=e,d=oe(),i=Z(),n=Te(),s=V(),c=_(!1);function t(){var v="Are you sure you want to delete this tester and all of its data?";n.warning({title:"Confirm",content:v,positiveText:"Delete",negativeText:"Cancel",onPositiveClick:async()=>{try{c.value=!0,await d.deleteTester(l.tester.testerUUID),i.fetchGroups(),s.success("Tester deleted successfully")}catch(f){s.error(f instanceof Error?f.message:"Unknown error")}finally{c.value=!1}}})}return(v,f)=>(C(),F(r(G),{show:c.value},{default:u(()=>[a(r(ze),null,{suffix:u(()=>[a(r(N),{onClick:P(t,["stop"]),class:"btn-course-action",size:"small",quaternary:"",circle:"",type:"error"},{icon:u(()=>[a(r(Y),{class:"icon-no-align"},{default:u(()=>[a(r(Re))]),_:1})]),_:1},8,["onClick"])]),default:u(()=>[S("div",null,[S("span",null,j(e.tester.firstname)+" "+j(e.tester.lastname),1),U("  "),S("span",Nt,j(e.tester.email),1)])]),_:1})]),_:1},8,["show"]))}});const It=ee(Ft,[["__scopeId","data-v-53faab87"]]),$t={class:"d-flex justify-content-end align-items-center"},Pt=z({__name:"AddTesterButton",setup(e){const l=oe(),d=V(),i=b(()=>t.value.firstname==""&&t.value.lastname==""&&t.value.email==""),n=_(!1),s=_(!1),c=_(null),t=_({firstname:"",lastname:"",email:""}),v={firstname:{type:"string",required:!1,trigger:["input","blur"]},lastname:{required:!1,trigger:["input","blur"]},email:{type:"email",required:!1,message:"Please enter a valid email address",trigger:["input","blur"]}};function f(){o(),s.value=!0}function h(){s.value=!1}function o(){t.value={firstname:"",lastname:"",email:""}}async function w(){try{await c.value?.validate()}catch{return}if(!(t.value.firstname==""&&t.value.lastname==""&&t.value.email==""))try{n.value=!0,await l.addTester(t.value.firstname,t.value.lastname,t.value.email)}catch(y){d.error(y instanceof Error?y.message:"Unknown error")}finally{n.value=!1,o(),h()}}return(y,x)=>(C(),L(X,null,[a(r(N),{size:"medium",onClick:f,type:"primary",secondary:"",class:"button-add-tester"},{icon:u(()=>[a(r(Y),{class:"icon-no-align"},{default:u(()=>[a(r(Ae))]),_:1})]),default:u(()=>[U("Add user ")]),_:1}),a(r(ve),{show:s.value,"onUpdate:show":x[3]||(x[3]=k=>s.value=k)},{default:u(()=>[a(r(W),{title:"Add a new user",style:{width:"600px"},bordered:!1,size:"large",role:"dialog","aria-modal":"true"},{default:u(()=>[a(r(G),{show:n.value},{default:u(()=>[a(r(ke),{ref_key:"formRef",ref:c,model:t.value,rules:v,disabled:n.value},{default:u(()=>[a(r(le),{path:"firstname",label:"First name"},{default:u(()=>[a(r(O),{value:t.value.firstname,"onUpdate:value":x[0]||(x[0]=k=>t.value.firstname=k),placeholder:"John"},null,8,["value"])]),_:1}),a(r(le),{path:"lastname",label:"Last name"},{default:u(()=>[a(r(O),{value:t.value.lastname,"onUpdate:value":x[1]||(x[1]=k=>t.value.lastname=k),placeholder:"Doe"},null,8,["value"])]),_:1}),a(r(le),{path:"email",label:"Email"},{default:u(()=>[a(r(O),{value:t.value.email,"onUpdate:value":x[2]||(x[2]=k=>t.value.email=k),placeholder:"john@doe.com"},null,8,["value"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["show"]),S("div",$t,[S("div",{class:"feedback fade-opacity w-100",style:pt({opacity:i.value&&!n.value&&s.value?"1":"0"})}," Please enter at least one field ",4),a(r(N),{onClick:P(h,["stop"]),style:{"margin-right":"0.5rem"},ghost:""},{default:u(()=>[U("Cancel")]),_:1},8,["onClick"]),a(r(N),{onClick:P(w,["stop"]),type:"primary"},{default:u(()=>[U("Add")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["show"])],64))}});const Lt=ee(Pt,[["__scopeId","data-v-f1d39774"]]),Ot={style:{"padding-bottom":"0.75rem","padding-top":"0.75rem"}},Vt={class:"d-flex"},Gt={class:"d-flex",style:{"margin-bottom":"0.5rem"}},fe=10,Bt=z({__name:"TesterList",setup(e){const l=oe(),d=V(),i=_(1),n=_(!0),s=_("");Ce(async()=>{try{n.value=!0,await l.fetchTesters()}catch(f){d.error(f instanceof Error?f.message:"Unknown error")}finally{n.value=!1}});const c=b(()=>Math.ceil(v.value.length/fe)),t=b(()=>v.value.slice((i.value-1)*fe,i.value*fe)),v=b(()=>l.testers.filter(f=>{if(s.value==="")return!0;const h=s.value.toLowerCase().split(" ").filter(o=>o!=="");for(const o of h)if(!((f.firstname??"").toLowerCase().includes(o)||(f.lastname??"").toLowerCase().includes(o)||(f.email??"").toLowerCase().includes(o)))return!1;return!0}));return(f,h)=>(C(),L("div",Ot,[a(r(W),{embedded:"",style:{"min-height":"200px"}},{default:u(()=>[S("div",Vt,[a(r(Fe),null,{default:u(()=>[U("Tester list")]),_:1})]),S("div",Gt,[a(r(O),{size:"medium",placeholder:"Search",value:s.value,"onUpdate:value":h[0]||(h[0]=o=>s.value=o)},null,8,["value"]),a(Lt)]),a(r(G),{show:n.value,style:{"min-height":"5rem"}},{default:u(()=>[a(r(Ue),{hoverable:"",style:{"background-color":"transparent"}},{default:u(()=>[(C(!0),L(X,null,we(t.value,o=>(C(),F(It,{key:o.testerUUID,tester:o},null,8,["tester"]))),128)),c.value>1?(C(),F(r(Ne),{key:0,page:i.value,"onUpdate:page":h[1]||(h[1]=o=>i.value=o),"page-count":c.value,style:{"margin-top":"0.5rem"}},null,8,["page","page-count"])):H("",!0)]),_:1}),v.value.length===0&&!n.value&&!r(l).isEmpty?(C(),F(r(Q),{key:0,style:{"margin-top":"1rem"},description:"No testers found!"})):H("",!0),!n.value&&r(l).isEmpty?(C(),F(r(Q),{key:1,style:{"margin-top":"1rem"},description:"No testers. Add someone to test your courses!"})):H("",!0)]),_:1},8,["show"])]),_:1})]))}}),Mt={style:{color:"var(--gray-3)","margin-left":"0.5rem"}},Dt={class:"large-text"},Et=z({__name:"GroupItem",props:{group:{type:Object,required:!0}},setup(e){const l=e,d=Z(),i=Te(),n=V(),s=_(!1);function c(){d.selectGroup(l.group.groupUUID)}function t(){var v="Are you sure you want to delete this group and all of its data?";i.warning({title:"Confirm",content:v,positiveText:"Delete",negativeText:"Cancel",onPositiveClick:async()=>{try{s.value=!0,await d.deleteGroup(l.group.groupUUID),n.success("Group deleted successfully")}catch(f){n.error(f instanceof Error?f.message:"Unknown error")}finally{s.value=!1}}})}return(v,f)=>(C(),L("div",{onClick:c},[a(r(G),{show:s.value},{default:u(()=>[a(r(ze),null,{suffix:u(()=>[a(r(N),{onClick:P(t,["stop"]),class:"btn-course-action",size:"small",quaternary:"",circle:"",type:"error"},{icon:u(()=>[a(r(Y),{class:"icon-no-align"},{default:u(()=>[a(r(Re))]),_:1})]),_:1},8,["onClick"])]),default:u(()=>[S("div",null,[S("span",null,j(e.group.groupName),1),a(r(kt),{placement:"right-start",trigger:"hover"},{trigger:u(()=>[S("span",Mt,[U(j(e.group.groupTestersCount)+" ",1),a(r(Y),{size:"medium"},{default:u(()=>[a(r(_t),{style:{"vertical-align":"bottom !important"}})]),_:1})])]),default:u(()=>[S("div",Dt,[S("div",null,j(e.group.groupTestersCount)+" named testers",1)])]),_:1})])]),_:1})]),_:1},8,["show"])]))}});const qt=ee(Et,[["__scopeId","data-v-0324c6c0"]]),jt={class:"d-flex justify-content-end align-items-center"},Ht=z({__name:"AddGroupButton",setup(e){const l=Z(),d=V(),i=_(!1),n=_(!1),s=_(null),c=_({groupName:""}),t={groupName:{type:"string",required:!0,message:"Please enter a name for the test group",trigger:["input","blur"]}};function v(){h(),n.value=!0}function f(){n.value=!1}function h(){c.value={groupName:""}}async function o(){try{await s.value?.validate()}catch{return}try{i.value=!0,await l.addGroup(c.value.groupName)}catch(w){d.error(w instanceof Error?w.message:"Unknown error")}finally{i.value=!1,h(),f()}}return(w,y)=>(C(),L(X,null,[a(r(N),{size:"medium",onClick:v,type:"primary",secondary:"",class:"button-add-group"},{icon:u(()=>[a(r(Y),{class:"icon-no-align"},{default:u(()=>[a(r(Ae))]),_:1})]),default:u(()=>[U("Add group ")]),_:1}),a(r(ve),{show:n.value,"onUpdate:show":y[1]||(y[1]=x=>n.value=x)},{default:u(()=>[a(r(W),{title:"Add a new group",style:{width:"600px"},bordered:!1,size:"large",role:"dialog","aria-modal":"true"},{default:u(()=>[a(r(G),{show:i.value},{default:u(()=>[a(r(ke),{ref_key:"formRef",ref:s,model:c.value,rules:t,disabled:i.value},{default:u(()=>[a(r(le),{path:"groupName",label:"Group name"},{default:u(()=>[a(r(O),{value:c.value.groupName,"onUpdate:value":y[0]||(y[0]=x=>c.value.groupName=x),placeholder:"Default test group"},null,8,["value"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["show"]),S("div",jt,[a(r(N),{onClick:P(f,["stop"]),style:{"margin-right":"0.5rem"},ghost:""},{default:u(()=>[U("Cancel")]),_:1},8,["onClick"]),a(r(N),{onClick:P(o,["stop"]),type:"primary"},{default:u(()=>[U("Add")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["show"])],64))}});const Kt=ee(Ht,[["__scopeId","data-v-1382fed7"]]),Jt={style:{"padding-bottom":"0.75rem","padding-top":"0.75rem"}},Yt={class:"d-flex"},Qt={class:"d-flex",style:{"margin-bottom":"0.5rem"}},me=10,Wt=z({__name:"GroupList",setup(e){const l=Z(),d=V(),i=_(1),n=_(!0),s=_("");Ce(async()=>{try{n.value=!0,await l.fetchGroups()}catch(f){d.error(f instanceof Error?f.message:"Unknown error")}finally{n.value=!1}});const c=b(()=>Math.ceil(v.value.length/me)),t=b(()=>v.value.slice((i.value-1)*me,i.value*me)),v=b(()=>l.groups.filter(f=>{if(s.value==="")return!0;const h=s.value.toLowerCase().split(" ").filter(o=>o!=="");for(const o of h)if(!(f.groupName??"").toLowerCase().includes(o))return!1;return!0}));return(f,h)=>(C(),L("div",Jt,[a(r(W),{embedded:"",style:{"min-height":"200px"}},{default:u(()=>[S("div",Yt,[a(r(Fe),null,{default:u(()=>[U("Group list")]),_:1})]),S("div",Qt,[a(r(O),{size:"medium",placeholder:"Search",value:s.value,"onUpdate:value":h[0]||(h[0]=o=>s.value=o)},null,8,["value"]),a(Kt)]),a(r(G),{show:n.value,style:{"min-height":"5rem"}},{default:u(()=>[a(r(Ue),{hoverable:"",clickable:"",style:{"background-color":"transparent"}},{default:u(()=>[(C(!0),L(X,null,we(t.value,o=>(C(),F(qt,{key:o.groupUUID,group:o},null,8,["group"]))),128)),c.value>1?(C(),F(r(Ne),{key:0,page:i.value,"onUpdate:page":h[1]||(h[1]=o=>i.value=o),"page-count":c.value,style:{"margin-top":"0.5rem"}},null,8,["page","page-count"])):H("",!0)]),_:1}),v.value.length===0&&!n.value&&!r(l).isEmpty?(C(),F(r(Q),{key:0,style:{"margin-top":"1rem"},description:"No groups found!"})):H("",!0),!n.value&&r(l).isEmpty?(C(),F(r(Q),{key:1,style:{"margin-top":"1rem"},description:"No groups. Only groups can be assigned to course tests!"})):H("",!0)]),_:1},8,["show"])]),_:1})]))}}),Xt={class:"d-flex justify-content-end align-items-center",style:{"margin-top":"1rem"}},Zt=z({__name:"AssignTestersModal",setup(e){const l=Z(),d=oe(),i=V(),n=vt(),s=_(["ac085844-27a0-4b3d-af15-8b3cdcc86805"]),c=_(!1),t=b({get(){return l.selectedGroupUUID!=""},set(o){o||l.selectGroup("")}});ht(async()=>{if(l.selectedGroupUUID==""){s.value=[];return}try{c.value=!0,s.value=await n.getGroupTesterUUIDs(l.selectedGroupUUID)}catch(o){i.error(o instanceof Error?o.message:"Unknown error")}finally{c.value=!1}});function v(){t.value=!1}async function f(){try{c.value=!0,await n.assignTestersToGroup(l.selectedGroupUUID,s.value),i.success("Testers assigned to group")}catch(o){i.error(o instanceof Error?o.message:"Unknown error")}finally{c.value=!1,l.modifySelectedGroupTesterCount(s.value.length),v()}}const h=b(()=>d.testers.map(o=>({value:o.testerUUID,label:o.firstname+" "+o.lastname+" ("+o.email+")"})));return(o,w)=>(C(),F(r(ve),{show:t.value,"onUpdate:show":w[1]||(w[1]=y=>t.value=y)},{default:u(()=>[a(r(W),{title:"Assign testers to group",style:{width:"80vw"},bordered:!1,size:"large",role:"dialog","aria-modal":"true"},{default:u(()=>[a(r(G),{show:c.value&&t.value},{default:u(()=>[a(r(At),{disabled:c.value,value:s.value,"onUpdate:value":w[0]||(w[0]=y=>s.value=y),"virtual-scroll":"",options:h.value,"source-filterable":""},null,8,["disabled","value","options"]),S("div",Xt,[a(r(N),{onClick:P(v,["stop"]),style:{"margin-right":"0.5rem"},ghost:""},{default:u(()=>[U("Cancel")]),_:1},8,["onClick"]),a(r(N),{onClick:P(f,["stop"]),type:"primary"},{default:u(()=>[U("Save")]),_:1},8,["onClick"])])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"]))}});const er=ee(Zt,[["__scopeId","data-v-658597f3"]]),tr={class:"d-flex"},rr={class:"row"},ar={class:"col-12 col-md-6"},lr={class:"col-12 col-md-6"},Sr=z({__name:"TestersView",setup(e){return(l,d)=>(C(),L(X,null,[S("div",tr,[a(r(St),null,{default:u(()=>[U("Tester and group management")]),_:1})]),a(r(yt),null,{default:u(()=>[S("div",rr,[S("div",ar,[a(Bt)]),S("div",lr,[a(Wt)])])]),_:1}),a(er)],64))}});export{Sr as default};
